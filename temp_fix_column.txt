// Substitua a funÃ§Ã£o handleDrop atual por esta versÃ£o:

const handleDrop = (e: React.DragEvent) => {
  e.preventDefault();
  e.currentTarget.classList.remove('bg-blue-50', 'border-blue-300', 'border-2');
  
  const taskId = e.dataTransfer.getData('taskId');
  const currentStatus = e.dataTransfer.getData('currentStatus') as TaskStatus;
  
  console.log('ğŸ¯ DROP EVENT na coluna:', title);
  console.log('ğŸ“¦ Dados transferidos:', { taskId, currentStatus });
  console.log('ğŸ¯ Estado destino:', status);
  console.log('ğŸ‘¤ Tipo de usuÃ¡rio:', userType);
  
  if (!taskId) {
    console.log('âŒ taskId nÃ£o encontrado no dataTransfer');
    return;
  }

  // NÃ£o permitir mover tarefas concluÃ­das (regra #15)
  if (currentStatus === TaskStatus.DONE) {
    console.log('âŒ NÃ£o pode mover tarefas concluÃ­das');
    return;
  }
  
  // Permitir que tanto programadores quanto gestores movam tarefas
  if (userType !== UserType.PROGRAMMER && userType !== UserType.MANAGER) {
    console.log('âŒ Apenas programadores e gestores podem mover tarefas');
    return;
  }
  
  // NÃ£o permitir mover para o mesmo estado
  if (currentStatus === status) {
    console.log('âŒ JÃ¡ estÃ¡ nesta coluna');
    return;
  }
  
  // SÃ³ permitir movimentos vÃ¡lidos
  const isValidMove = (
    (currentStatus === TaskStatus.TODO && status === TaskStatus.DOING) ||
    (currentStatus === TaskStatus.DOING && (status === TaskStatus.TODO || status === TaskStatus.DONE)) ||
    // Gestores podem mover entre qualquer estado (exceto DONE como origem)
    (userType === UserType.MANAGER && currentStatus !== TaskStatus.DONE)
  );
  
  if (isValidMove) {
    console.log('âœ… Movimento vÃ¡lido!');
    console.log('ğŸ“ Chamando onTaskMove...');
    onTaskMove(taskId, status);
  } else {
    console.log('âŒ Movimento invÃ¡lido:', { 
      de: currentStatus, 
      para: status,
      userType: userType
    });
  }
};
